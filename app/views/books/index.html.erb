<p id="notice"><%= notice %></p>

<h1>Listing Books</h1>

<div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <!-- When submit the form, the view rendered will be the index view of our articles resource -->

          <%= form_tag(books_path, :method => "get", class: "navbar-form", id: "search-form") do %>
              <th colspan="8">
                    <%= text_field_tag :search, params[:search], class: "form-control input-sm", placeholder: "Search by ( Name, Author, Barcode )" %>
              </th>
              <th>
                <button class="btn btn-success" type="submit">Search<i class="icon-search"></i></button>
              </th>
          <% end %>
        </tr>
        <tr>
          <th>Category</th>
          <th>Name</th>
          <th>Author</th>
          <th>Barcode</th>
          <th>Shelf Number</th>
          <th>Status</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @books.each do |book| %>
          <tr>
            <td><%= book.book_type.category.name %></td>
            <td><%= book.book_type.name %></td>
            <td><%= book.book_type.author %></td>
            <td><%= book.barcode %></td>
            <td><%= book.shelf_number %></td>
            <td><%= book.status.name %></td>
            <% if current_user.role==librarian_role %>
            <td><%= link_to 'Show', book %></td>
            <td><%= link_to 'Edit', edit_book_path(book) %></td>
            <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
</div>

<br>

<%= link_to 'New Book', new_book_path %>
